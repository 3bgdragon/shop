language: java
jdk:
  openjdk8
branches:
only:
  - master

before_install:
  chmod +x gradlew
cache:
directories:
  - '$HOME/.m2/repository'
  - '$HOME/.gradle'
script: "./gradlew clean build"


before_deploy:
  - zip -r freelec-springboot2-webservice
  - mkdir -p deploy
  - mv freelec-springboot2-webservice.zip deploy/freelec-springboot2-webservice.zip

deploy:
  -provider: s3
   access_key_id: $AWS_ACCESS_KEY # Travis repo settings에 설절된값
   secret_access_key: $AWS_SECRET_KEY
   bucket: freeleck-springboot-build
   skip_cleanup: true
   acl: private
   local_dir: deploy
   wait-until-deployed: true

notifications:
email:
recipients:
  - 3bgdragon@naver.com